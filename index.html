<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="description" content="Break the 2 AM anxiety loop. A gentle companion for sleepless nights.">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-title" content="SAT">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2453572040548667"
        crossorigin="anonymous"></script>
    <title>SAT - Sleep Anxiety Tracker</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;1,300&family=Inter:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/screens.css">
    <link rel="stylesheet" href="styles/features.css">
</head>

<body>
    <!-- Hypnotic Background Canvas -->
    <canvas id="hypnotic-canvas" class="hypnotic-canvas"></canvas>

    <div id="app">
        <!-- Screen 1: Home -->
        <section id="screen-home" class="screen active"
            style="display: block !important; overflow-y: auto !important; overflow-x: hidden !important; align-items: flex-start !important; justify-content: flex-start !important;">
            <div class="home-container">
                <!-- Breathing Background Animation -->
                <div class="breathing-bg"></div>

                <!-- Top Bar: Minimal Controls -->
                <header class="home-header">
                    <button id="btn-journal" class="btn-icon" aria-label="Open Journal">üìì</button>
                    <div class="header-spacer"></div>
                    <button id="btn-twilight" class="btn-icon" aria-label="Toggle Twilight Mode">üåô</button>
                    <button id="btn-noise" class="btn-icon" aria-label="Toggle Brown Noise">üîá</button>
                </header>

                <!-- Main Hero Content -->
                <main class="home-main">
                    <p class="whisper">It's okay to be here.</p>
                    <h1 class="headline-main">The night is long,<br>but it ends.</h1>

                    <button id="btn-anxious" class="btn-main" aria-label="I'm awake and anxious">
                        I'm awake and anxious
                    </button>

                    <div class="social-proof">
                        <span class="pulse-dot"></span> 1,247 people found relief tonight
                    </div>
                </main>

                <!-- Scrollable Content Section for AdSense -->
                <article class="home-article">
                    <h2>Understanding Sleep Anxiety</h2>
                    <p>
                        Sleep anxiety is a self-reinforcing loop. The fear of not sleeping creates a stress response,
                        which prevents sleep.
                        SAT uses <strong>Cognitive Behavioral Therapy for Insomnia (CBT-I)</strong> principles to break
                        this cycle.
                    </p>
                    <h3>The Tools</h3>
                    <ul>
                        <li><strong>Box Breathing:</strong> Downregulates your nervous system.</li>
                        <li><strong>Cognitive Shuffling:</strong> Scrambles thought patterns.</li>
                        <li><strong>Worry Burning:</strong> Clears working memory.</li>
                    </ul>
                    <p class="disclaimer">
                        This is not a medical device. <a href="terms.html">Terms</a> | <a href="resources.html">Learn
                            More</a>
                    </p>
                </article>

                <!-- Footer -->
                <footer class="home-footer">
                    <div class="sound-controls" id="sound-controls">
                        <button class="btn-sound" data-sound="rain">üåßÔ∏è</button>
                        <button class="btn-sound" data-sound="fire">üî•</button>
                        <button class="btn-sound" data-sound="thunder">‚õàÔ∏è</button>
                    </div>
                    <nav class="footer-links">
                        <a href="about.html">About</a>
                        <a href="resources.html">Resources</a>
                        <a href="terms.html">Terms</a>
                        <a href="privacy.html">Privacy</a>
                        <a href="contact.html">Contact</a>
                    </nav>
                    <p class="trust-signal">OFFLINE READY ‚Ä¢ NO TRACKING ‚Ä¢ NO SIGNUP</p>
                </footer>
            </div>
        </section>

        <!-- Screen 2: Script -->
        <section id="screen-script" class="screen">
            <div class="script-container">
                <p id="script-text" class="script-body"></p>
                <button id="btn-done" class="btn-secondary">I've read this</button>
            </div>
        </section>

        <!-- Screen 3: Micro Action -->
        <section id="screen-action" class="screen">
            <div class="action-container">
                <p class="action-prompt">Would you like to try something small?</p>
                <div class="action-card glass-panel">
                    <p id="action-text" class="action-body"></p>
                </div>
                <div class="action-buttons">
                    <button id="btn-try" class="btn-secondary">I'll try it</button>
                    <button id="btn-skip" class="btn-ghost">Not tonight</button>
                </div>
            </div>
        </section>

        <!-- Screen 4: Log (Optional) -->
        <section id="screen-log" class="screen">
            <div class="log-container">
                <p class="log-prompt">How are you feeling now?</p>
                <div class="log-buttons">
                    <button class="btn-log" data-feeling="better">Better</button>
                    <button class="btn-log" data-feeling="same">Same</button>
                    <button class="btn-log" data-feeling="worse">Worse</button>
                </div>
            </div>
        </section>

        <!-- Screen 5: Breathing (Box Breathing) -->
        <section id="screen-breathe" class="screen">
            <div class="breathe-container">
                <div class="box-breathing">
                    <span class="breathe-label label-top">Inhale</span>
                    <span class="breathe-label label-right">Hold</span>
                    <span class="breathe-label label-bottom">Exhale</span>
                    <span class="breathe-label label-left">Hold</span>
                    <div class="box-dot"></div>
                </div>

                <div class="breathe-buttons">
                    <button id="btn-breathe-done" class="btn-ghost">I'm calmer</button>
                    <button id="btn-breathe-fail" class="btn-text-danger">Still not well</button>
                </div>
                <p class="content-link" style="margin-top: 1.5rem; font-size: 0.85rem; color: var(--text-muted);">
                    <a href="articles/box-breathing.html" style="color: var(--text-secondary);">Learn how box breathing
                        works ‚Üí</a>
                </p>
            </div>
        </section>

        <!-- Screen 6: Rescue Toolkit (Dynamic) -->
        <section id="screen-rescue" class="screen">
            <div class="rescue-container glass-panel">
                <h2 id="rescue-title" class="rescue-title">Title</h2>
                <div id="rescue-content" class="rescue-body">
                    <!-- Dynamic Content -->
                </div>
                <!-- Candle Visualizer -->
                <div id="candle-container" class="candle-container">
                    <div class="candle">
                        <div class="flame"></div>
                    </div>
                    <p class="candle-base">Focus on the flame</p>
                </div>

                <!-- Cognitive Shuffle Container -->
                <div id="shuffle-container" class="shuffle-container" style="display: none;"></div>

                <div class="rescue-buttons">
                    <button id="btn-rescue-done" class="btn-main">This helped</button>
                    <button id="btn-rescue-next" class="btn-ghost">Try something else</button>
                </div>
                <p class="content-link" style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-muted);">
                    <a href="articles/cognitive-shuffle.html" style="color: var(--text-secondary);">Learn about these
                        techniques ‚Üí</a>
                </p>
            </div>
        </section>

        <!-- Screen 7.5: Worry Burner -->
        <section id="screen-worry" class="screen">
            <div class="worry-container glass-panel">
                <h2 class="worry-title">Burn It Away</h2>
                <p class="worry-subtitle">What's keeping you awake?</p>
                <textarea id="worry-input" class="worry-input" placeholder="Type it here... then let it go."
                    maxlength="300"></textarea>
                <div class="worry-buttons">
                    <button id="btn-worry-burn" class="btn-main">üî• Let Go</button>
                    <button id="btn-worry-skip" class="btn-ghost">Skip</button>
                </div>
                <canvas id="burn-canvas" class="burn-canvas"></canvas>
                <p class="content-link" style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-muted);">
                    <a href="articles/worry-burning.html" style="color: var(--text-secondary);">Learn about expressive
                        writing ‚Üí</a>
                </p>
            </div>
        </section>

        <!-- Screen 9: Journal (Experimental) -->
        <section id="screen-journal" class="screen">
            <div class="journal-container glass-panel">
                <h2 class="journal-title">Night Thoughts</h2>
                <p class="journal-subtitle">No guilt. No syncing. Just dump your mind here.</p>
                <textarea id="journal-input" class="journal-input" placeholder="What's on your mind?"></textarea>
                <div class="journal-buttons">
                    <button id="btn-journal-save" class="btn-main">Save & Close</button>
                    <button id="btn-journal-clear" class="btn-ghost">Clear</button>
                    <button id="btn-journal-back" class="btn-ghost">Back</button>
                </div>
                <p class="content-link" style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-muted);">
                    <a href="articles/journaling.html" style="color: var(--text-secondary);">Learn about nighttime
                        journaling ‚Üí</a>
                </p>
            </div>
        </section>

        <!-- Screen 8: Permission (After Better) -->
        <section id="screen-permission" class="screen">
            <div class="permission-container glass-panel">
                <p class="permission-title">Permission Granted</p>
                <p class="permission-body">
                    You have done the work.<br>
                    You have faced the anxiety.<br>
                    You are safe now.
                </p>
                <div class="permission-sig">
                    <p>Status: <span>Ready to Rest</span></p>
                </div>
                <button id="btn-permission-done" class="btn-main">Goodnight</button>
            </div>
        </section>

        <!-- Screen 8: End -->
        <section id="screen-end" class="screen">
            <div class="end-container">
                <p class="end-message">You are safe.<br>Rest well.</p>
            </div>
        </section>
    </div>

    <script src="data.js"></script>
    <script src="techniques/boxBreathing.js"></script>
    <script src="techniques/breath478.js"></script>
    <script src="techniques/candleFlicker.js"></script>
    <script src="techniques/worryBurner.js"></script>
    <script src="techniques/cognitiveShuffle.js"></script>

    <!-- Modules -->
    <script src="modules/sleepJournal.js"></script>
    <script src="modules/cookieConsent.js"></script>
    <script src="modules/state.js"></script>
    <script src="modules/audio.js"></script>
    <script src="modules/canvas.js"></script>
    <script src="modules/soundscapePlus.js"></script>
    <script src="modules/techniqueManager.js"></script>
    <script src="modules/ui.js"></script>
    <script src="modules/app.js"></script>
</body>

</html>